# Kickstart file automatically generated by anaconda.

install
cdrom
lang en_US.UTF-8
keyboard us
text
skipx
eula Accepted
network --device eth1 --bootproto static --ip 192.168.60.1 --netmask 255.255.255.0 --gateway 192.168.60.1 --nameserver 192.168.60.1 --hostname ovs1.lab.net --onboot yes --noipv6
network --device eth0 --bootproto dhcp --onboot yes --noipv6
ovsagent --iscrypted $6$7pmoFQkesY.XuBh1$koGem2MXBVCkQkqEjPXOSmKRwLE0G64jZebf/3COkZj/A3cQry818054VhKoOhgy/RIufZdvYOsj1RwP3FzR5/
ovsmgmntif eth1
rootpw --iscrypted $1$XTtYd5Q5$5iRGAsZoBj6n7OzaUMOFI1
firewall --enabled --port=21:tcp --port=22:tcp --port=53:udp --port=53:tcp --port=80:tcp --port=2049:tcp --port=5900-7999:tcp --port=8002:tcp --port=8003:tcp --port=8899:tcp --port=7777:tcp
authconfig --enableshadow --enablemd5
selinux --disabled
timezone --utc America/Los_Angeles
bootloader --location=mbr --dom0_mem=536 --driveorder=sda
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
zerombr
clearpart --all --drives=sda
part /boot --fstype ext3 --size=100 --ondisk=sda
part / --fstype ext3 --size=3072 --ondisk=sda
part swap --size=1024 --ondisk=sda
reboot
%packages
@base
@core
@ovs-virtualization
%post --log=/root/post.install.log
# ssh expects to find vagrant as an ssh user at the end of the initial build
/usr/sbin/useradd vagrant 
echo "vagrant"|passwd --stdin vagrant
echo "vagrant ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers
sed -i "s/^.*requiretty/#Defaults requiretty/" /etc/sudoers

# vagrant user needs to be able to ssh in using the public key
mkdir -pm 700 /home/vagrant/.ssh
cat  >/home/vagrant/.ssh/authorized_keys <<EOF
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key
EOF
chmod 0600 /home/vagrant/.ssh/authorized_keys
chown -R vagrant:vagrant /home/vagrant/.ssh

%end
