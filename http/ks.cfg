# Kickstart file automatically generated by anaconda.

install
cdrom
lang en_US.UTF-8
keyboard us
text
skipx
eula Accepted
network --device eth1 --bootproto static --ip 192.168.60.1 --netmask 255.255.255.0 --gateway 192.168.60.1 --nameserver 192.168.60.1 --hostname ovs1.lab.net --onboot yes --noipv6
network --device eth0 --bootproto dhcp --onboot yes --noipv6
ovsagent --iscrypted $6$7pmoFQkesY.XuBh1$koGem2MXBVCkQkqEjPXOSmKRwLE0G64jZebf/3COkZj/A3cQry818054VhKoOhgy/RIufZdvYOsj1RwP3FzR5/
ovsmgmntif eth1
rootpw --iscrypted $1$XTtYd5Q5$5iRGAsZoBj6n7OzaUMOFI1
firewall --enabled --port=21:tcp --port=22:tcp --port=53:udp --port=53:tcp --port=80:tcp --port=2049:tcp --port=5900-7999:tcp --port=8002:tcp --port=8003:tcp --port=8899:tcp --port=7777:tcp
authconfig --enableshadow --enablemd5
selinux --disabled
timezone --utc America/Los_Angeles
bootloader --location=mbr --dom0_mem=536 --driveorder=sda
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
zerombr
clearpart --all --drives=sda
part /boot --fstype ext3 --size=100 --ondisk=sda
part / --fstype ext3 --size=3072 --ondisk=sda
part swap --size=1024 --ondisk=sda
reboot
# Need to install sudo very early on for Packer
#repo --name=public_ol5_latest --baseurl=http://public-yum.oracle.com/repo/OracleLinux/OL5/latest/x86_64
%packages
@base
@core
@ovs-virtualization
#sudo
%post --log=/root/post.install.log
cat >/etc/sysconfig/network-scripts/ifcfg-eth0 <<EOF
DEVICE=eth0
BOOTPROTO=dhcp
ONBOOT=yes
EOF
# ssh expects to find vagrant as an ssh user at the end of the initial build
/usr/sbin/useradd vagrant 
# echo "vagrant"|passwd --stdin vagrant
# echo "vagrant ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers
%end
